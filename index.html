<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>ツールチップに画像を表示</title>

    <!-- この行は他でjqueryを読み込んでいれば必要ありません(おそらくもうされていると思います) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- javascript -->
    <script>
        $(function () {
            $(".card")
                //マウスが乗ったら表示
                .mouseenter(
                    function (e) {
                        var tip = $(this).next(".tip");

                        //card文字列の左上のXY座標
                        var spanLeft = $(this).offset().left;
                        var spanTop = $(this).offset().top;

                        //tip画像の左上のXY座標(card文字列のすぐ右)
                        var tipLeft = spanLeft + $(this).width();
                        var tipTop = spanTop;

                        //tip画像の幅と高さ
                        var tipWidth = tip.width();
                        var tipHeight = tip.height();

                        //画像の表示が画面幅を超える場合は、X座標を文字列の左に
                        if ($(window).width() < tipLeft + tipWidth) {
                            tipLeft = spanLeft - tipWidth;
                        }
                        //画像の表示が画面高さを超える場合は、Y座標を文字列の上に
                        if ($(window).height() < tipTop + tipHeight) {
                            tipTop = spanTop + $(this).height() - tipHeight;
                        }

                        //表示位置を調整
                        tip.css({ left: tipLeft, top: tipTop });
                        //表示
                        tip.show();
                    }
                )
                //マウスが外れたら非表示
                .mouseleave(
                    function () {
                        var tip = $(this).next(".tip");
                        tip.hide();
                    }
                );
        });
    </script>

    <!-- css -->
    <style>
        .tip {
            /* ツールチップをデフォルトで非表示 */
            display: none;

            /* 表示調整 */
            position: absolute;
            z-index: 0;

            /* 大きさ(適当です) */
            /* 画像サイズが調整済の場合は必要ありません */
            width: 200px;
        }
    </style>
</head>

<body>
    <div id="main">
        <h1>ツールチップのデモです。</h1>
        <p>
            <!-- カード1枚につき、ここから -->
            <span class="card">カード名1</span>
            <img class="tip" src="images/s01.png" />
            <!-- ここまで -->
            <!-- imgタグはspanタグのすぐ後ろに置く想定です。 -->

            と
            <strong>
                <span class="card">カード名2</span>
                <img class="tip" src="images/s02.png" />
            </strong>
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            -------------------------------------------------------
            <span class="card">カード名3</span>
            <img class="tip" src="images/s03.png" />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <span class="card">カード名4</span>
            <img class="tip" src="images/s04.png" />
        </p>
    </div>
</body>

</html>
