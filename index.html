<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>ツールチップに画像を表示</title>

    <!-- この行は他でjqueryを読み込んでいれば必要ありません(おそらくもうされていると思います) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- javascript -->
    <script>
        $(function () {
            $(".card")
                //マウスが画像の上を移動すると画像が消えない不具合があり、
                //原因は分かっているので修正予定です

                //ホバーイベント
                .hover(
                    function () {
                        var tip = $(this).next(".tip");
                        tip.show(); //マウスオーバーで表示
                    }, 
                    function () {
                        var tip = $(this).next(".tip");
                        tip.hide(); //マウスオーバーで表示
                    }
                )
                .mousemove(
                    function (e) {
                        var tip = $(this).next(".tip");

                        var tipLeft = e.pageX;
                        var tipTop = e.pageY;

                        var mouseX = e.clientX;
                        var mouseY = e.clientY;
                        var tipWidth = tip.width();
                        var tipHeight = tip.height();
                        var tipVisX = $(window).width() - (mouseX + tipWidth);
                        var tipVisY = $(window).height() - (mouseY + tipHeight);
                        if (tipVisX < 0) { //画面幅を超えた場合はX座標を調節
                            tipLeft = tipLeft - tipWidth;
                        }
                        if (tipVisY < 0) { //画面高さを超えた場合はY座標を調節
                            tipTop = tipTop - tipHeight;
                        }

                        tip.css({ left: tipLeft, top: tipTop });
                    }
                );
        });
    </script>
    
    <!-- css -->
    <style>
        .tip {
            /* ツールチップをデフォルトで非表示 */
            display: none;

            /* 表示調整 */
            position: absolute;
            z-index: 0;

            /* 大きさ(適当です) */
            /* 画像サイズが調整済の場合は必要ありません */
            width: 200px;
        }
    </style>
    
</head>

<body>
    <div id="main">
        <h1>ツールチップのデモです。</h1>
        <p>
            <!-- カード1枚につき、ここから -->
            <span class="card">カード名1</span>
            <img class="tip" src="images/s01.png" />
            <!-- ここまで -->
            
            <!-- imgタグはspanタグのすぐ後ろに置く想定です。 -->
            
            と
            <strong>
                <span class="card">カード名2</span>
                <img class="tip" src="images/s02.png" />
            </strong>
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            -------------------------------------------------------
            <span class="card">カード名3</span>
            <img class="tip" src="images/s03.png" />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <span class="card">カード名4</span>
            <img class="tip" src="images/s04.png" />
        </p>
    </div>
</body>

</html>
